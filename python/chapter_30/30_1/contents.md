# 30-1. TDD 개요

> [폭포수(Waterfall) 개발 방법론이란?](https://ko.wikipedia.org/wiki/%ED%8F%AD%ED%8F%AC%EC%88%98_%EB%AA%A8%EB%8D%B8)
> > 완전한 설계를 지향하는 방법론, 처음부터 끝까지 계획을 수립하고 개발.   
> > 기획 --> 설계 --> 개발 --> 테스트 --> 수정 --> ...
> 
> [애자일(Agile) 개발 방법론이란?](https://ko.wikipedia.org/wiki/%EC%95%A0%EC%9E%90%EC%9D%BC_%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EA%B0%9C%EB%B0%9C)
> > 개발과 함께 즉시 피드백을 받아 유동적으로 개발하는 방법론, 익스트림 프로그래밍(XP) 및 테스트 주도 개발(TDD)이 대표적이다.   
> > 테스트 --> 개발 --> 수정 --> 테스트 --> ...

### [동적 타입 언어(Python, Javascript 등)](https://ko.wikipedia.org/wiki/%EB%8F%99%EC%A0%81_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D_%EC%96%B8%EC%96%B4)로 개발을 진행할 경우, `TDD` 도입을 하면 인생이 조금은 더 편하다. (절대적은 아님)`

---

소프트웨어 개발 초기에는 [폭포수 모델](https://ko.wikipedia.org/wiki/%ED%8F%AD%ED%8F%AC%EC%88%98_%EB%AA%A8%EB%8D%B8)을 따랐다. 
허나 구현하는 소프트웨어의 규모가 커지고 복잡해짐에 따라 소프트웨어 위기라는 문제에 봉착하게 되고, 소프트웨어 공학에서는 소프트웨어 개발 과정이 다른 
공학적 방식과 큰 차이가 있음을 인지하게 된다.

스프투에어는 유동적이고 예측하기 어렵다. 또한 소프트웨어가 발전하면서 점차 확장가능성, 개방적 구조를 요구하게 되었다. 따라서 구체적으로 개발이 언제 완료 
될 것인지 예측하는 것이 매우 어려울 뿐더러, 인원과 비용을 늘린다고 해서 개발 시간의 절감이나 질적인 성과를 보장할 수 없다. 소프트웨어의 규모가 커지고
복잡해질수록 기존의 [폭포수 모델](https://ko.wikipedia.org/wiki/%ED%8F%AD%ED%8F%AC%EC%88%98_%EB%AA%A8%EB%8D%B8)을 적용했을 때
다음과 같이 다양한 문제점이 발견되었다.

+ 개발에 적용할 수 있을 수준의 구체적인 요구사항을 작성하는 것이 매우 어려움을 넘어 불가능 함.
+ 규모가 커질수록 설계에 요구되는 시간과 비용이 기하급수적으로 증대됨.
+ 실제로 개발에 들어가고나서 정해진 요구사항이 변경되거나 다양한 문제점이 발견됨.
+ 위와 같은 문제로 인해 작업 난이도 및 개발 일정을 예측하는 것이 어려움.

기존의 [계획 주도 개발](https://ko.wikipedia.org/wiki/%EA%B3%84%ED%9A%8D_%EA%B8%B0%EB%B0%98_%EA%B0%9C%EB%B0%9C)방식에서는 세운
계획대로 개발이 흘러가지 않으며, 그것을 보완하기 위해 언제나 개발이 지연되었고, 개발자에게 주어지는 스트레스와 과중한 업무, 그 결과 떨어지는 생산성과 
상품성 등에 직면하여 __소프트웨어 공학자들은 전통적인 개발 프로세스에 큰 의문을 제기하였다.__ 이에 완전한 설계를 지향하는 폭포수 모델을 폐기하고, 초기의 
설계 비용을 줄이고자 작은 규모의 소프트웨어를 완성한 다음 그것을 점차 보완해가며 복잡한 소프트웨어를 완성하는 [나선형 모델(Spiral Model)](https://ko.wikipedia.org/wiki/%EB%82%98%EC%84%A0_%EB%AA%A8%ED%98%95)을
도입입하는 등 산업에서는 보다 경험적 프로세스 제어 모델로 이행하게 된다.

[애자일 프로그래밍(Agile Programming)](https://ko.wikipedia.org/wiki/%EC%95%A0%EC%9E%90%EC%9D%BC_%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EA%B0%9C%EB%B0%9C)
방식은 계획과 문서에 의존하는 기존의 방식을 부정한다. 미래에 대한 예측을 차단하고 지속적인 `프로토타입`의 완성을 반복하여 그때그때 __작은 단위 요구사항을 
추가하고 기존의 문제점을 해결하여 점차 큰 규모의 소프트웨어를 완성하는 개발 방식이다.__

[익스트림 프로그래밍(eXtream Programming, XP)](https://ko.wikipedia.org/wiki/%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%A6%BC_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)은
`대표적인 애자일 프로그래밍 개발방법론` 중 하나로, 고객이 원하는 소프트웨어를 빠른 시간 내에(약 2주) 프로토타입의 형태로 전달하고 이를 통해 고객이 원하는 
소프트웨어를 이끌어내며, 수시로 발생하는 요구 사항에 대처하는 것을 목표로 한다.

다른 애자일 방법론과 구별되는 XP의 __특징__ 은 `테스팅(Testing)`이다. 구현과 테스트를 하나의 쌍으로 취급하여, 실제 구현과 동시에 테스트 코드를 작성하도록
하며, 이것에 기반한 프로젝트 발전 과정은 애자일 방법론의 기본 개념인 __"반복적으로 프포토 타입을 고객에 전달함으로써 고객의 요구사항 변화에 민첩하게 대응한다."__ 를 
실천하는데에 큰 도움을 줄 수 있다. 왜냐하면 매번 프로토타입을 고객에 전달함에 있어서 프로토타입 자체로써 버그가 상대적으로 적은 완벽에 가까운 데모를 경험하게 
해줄 수 있기 때문이다.

[테스트 주도 개발(Test Driven Development, TDD)](https://ko.wikipedia.org/wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%A3%BC%EB%8F%84_%EA%B0%9C%EB%B0%9C) 은
__익스트림 프로그래밍 개발방법론의 실천 방안 중 하나__ 이다. 개발이 이루어진 다음 그것이 계획대로 잘 완성되었는지 테스트 케이스를 작성하고 테스트하는 
타 방식과는 달리, __테스트 케이스를 먼저 작성한 다음 테스트 케이스에 맞춰 실제 개발 단계로 이행하는 개발 방법론이다.__

> 테스트 주도 개발(TDD)이란?
> > 테스트 케이스(Test Case)를 먼저 작성한 후 테스트 케이스(Test Case)에 맞춰 실제 개발을 진행하는 개발 방법론.   
> > 한 마디로, 테스트를 가장 먼저 진행!

묵시적으로 잠재된 상황을 가정하지 않고 테스트 케이스만을 완벽하게 수행하는 것을 목표로 하기 때문에 매우 빠르게 목표를 완료할 수 있다.
한편, TDD 자체가 하나의 테스트가 완전하지 않다는 것을 가정하고 있기 때문에 1차 테스트를 완료한 다음 새로운 테스트 케이스를 확장해서 작성하고 그것을 통과하기 
위한 개발에 들어가는 과정을 끊임없이 반복하여 큰 규모의 프로젝트를 완성해가는 것이다.

---

## 단위 테스트 작성 방법

테스트 주도 개발에서 작성되는 테스트는 단위 테스트가 대표적이다. 먼저 단위 테스트는 말 그대로 한 단위만을 테스트하는 것이다. 

1. 일단 테스트를 작성.
2. 에러가 발생되지 않도록 테스트에서 쓰이는 클래스와 그 메소드를 정의(정말 심플하게)
3. 테스트 실행
4. 클래스 구현
5. 클래스에서 다른 클래스가 필요하면, 지금 작성중인 클래스의 테스트를 통과하게만 해 두고 나중에 그 클래스의 테스트 케이스를 작성한 후 구현한다.

이런 식으로 프로젝트 전체를 완성해 나간다. 하지만 단위 테스트는 단위 하나하나에 대해서만 검증할 수 있으므로, 이를 해결하기 위해 인수 테스트를 작성한다.

## TDD 장점

+ __코드의 유지보수 용이__
  + 프로그래밍 개발에서는 처음 개발할 때보다 이미 개발한 코드의 버그를 수정하고, 최적화하고, 새 기능을 추가할 때 비용이 더 들어간다. 그런데 테스트를 
  작성하면 코드의 행위가 보증되므로 원하는 부분에만 신경을 쓸 수 있다.
  + 쉬운 코드는 자연히 품질이 높아지므로 다시 읽기도 편하다. 또한 테스트가 있으면 코드를 리팩토링할 수 있다.
+ __프로그래밍 시간 단축__
  + 테스트를 작성하는 시간을 포함하고도 오히려 전체 작업 시간은 줄어든다. 그 이유는 __프로그래밍에서의 대부분 시간__ 은 `디버깅(debugging)`에 
  할애되는데, 테스팅은 디버깅을 해야 할 범위를 단위 안으로 제한함으로써 디버깅에 들어가는 노고를 크게 줄여준다. 이로인해 유지보수 효율이 높아진다.
  + 특히 Javascript나 Python 등의 `동적 타입 언어`로 개발을 할 경우, `TDD`는 `필수적`에 가깝다 할 수 있다. 필수적인 것에 가까운 것이지 절대적이라는 
  말은 아니니 오해는 하지 말자.
+ __프로그램 소스코드 기록__
  + 테스트를 작성하는 것 자체가 훌륭한 소스 코드 기록이다. 
  + 소스 코드의 주석은 해당 코드가 왜 이렇게 작성되었는지를 기록하는 것이라면, 단위 테스트는 코드가 어떠한 방식으로 작동하는지를 기록한다.
  + 이로인해 다른 개발자가 코드를 파악하고 유지보수하는데 시간과 비용이 크게 절감된다.

## TDD 단점

+ __생산성 저하__
  + 가장 큰 단점이라면, 생산성이 크게 저하된다는 점이다. 그 이유는 개발할 코드를 2번 이상 반복하게 되기 때문이다. 
    + 테스트 코드 작성
    + 실제 구현 코드 작성
+ __코드 구조 제약__
  + TDD는 테스트 코드 작성이 우선시되므로 실제 코드의 구조와 설계에 테스트 코드가 영향을 줄 수 밖에 없다.
  + 즉, 테스트 코드 작성에 따라 실제 코드의 구조가 변경되거나 제약을 받을 수 있다.
+ __테스트 우선 원칙__
  + TDD는 테스트 케이스를 작성하고 테스트를 통과시키는 것이 개발의 주요 원칙이 된다. 이로 인해 실제 코드의 중요성이 상대적으로 낮아지고,
  테스트 케이스를 만족시키는 것에 더 많은 관심과 노력이 기울어질 수 있다.

## 정리

TDD를 적용하면 초기 비용과 개발 시간이 증가할 수 있는 담점이 생기기 마련이다. 하지만 테스트 케이스 작성과 코드 작성을 번갈아 가며 진행함으로써 버그를 
사전에 발견하고 수정할 수 있으며 코드의 품질을 높일 수 있는 장점 또한 가지고 있다.   
더불어 테스트 케이스를 통해 기능의 동작을 명확하게 이해하고 문서화할 수 있어 `협업`과 `유지보수`에 큰 도움이 된다.

TDD는 개발자에게 안정성과 신뢰성을 더한 소프트웨어를 제공하고 프로젝트의 성공을 이끌어가는데 기여할 수 있다. 하지만 `TDD`는 __항상 적용해야 하는
절대적인 방법론은 아니며, 프로젝트의 특성과 환경을 고려하여 적합성을 판단해야 한다.__

TDD를 적절한 상황에서 적용하면 효율성과 품질 향상으로 보다 나은 소프트웨어 개발을 진행할 수 있다.
