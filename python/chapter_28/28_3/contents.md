# 28-3. HTTP

HTTP는 `HyperText Transfer Protocol`의 약자로서, 웹상에서 서로 다른 서버 간에 하이퍼텍스트 문서, 즉, HTML을 서로 주고받을 수 있도록
만들어진 프로토콜, 통신 규약이다. 

웹상에서 네트워크를 통해 서버 사이에 통신할 때 어떠한 형식으로 서로 통신하자고 규정해 놓은 `통신 형식` 혹은 `통신 구조`라고 보면 된다. 사람 간의
대화로 비유하자면, 만일 두 사람이 대화를 하는데 한 명은 한국어를 하고 다른 한명은 영어를 한다면 서로 이해할 수 없을 것이다. 둘 다 이해하는 공용어를 
사용해야만 서로 대화가 가능해질 것이다.

마찬가지로 서버 간의 통신에서도 서로 이해할 수 있는 공통의 통신 형식이 필요하다. 그러한 통신 형식을 `프로토콜(protocol)`이라고 하고, 프로토콜 중에
가장 널리 사용되는 프로토콜이 바로 `HTTP`라고 생각하면 된다.

> HTTP는 1989년에 팀 버너스 리가 인터넷상에서 문서를 전송하기 위한 목적으로 발명하였다. 웹 초기 시대에 정말 단순하게 HTML 데이터를 전송하는 데
> 주로 쓰였다. 그러다 웹 기술이 발전함에 따라 이제는 단순 HTML을 넘어서서 여러 다양한 데이터를 전송하는 데 사용된다.

## HTTP 통신 방식

HTTP 통신 방식에는 2가지 특징이 있다. 하나는 HTTP의 `요청(request)`과 `응답(response)`방식이고, 또 다른 특징은 `stateless`이다.

## HTTP 요청과 응답

먼저 HTTP 프로토콜에 대해서 이해해야 할 것은, HTTP는 기본적으로 `요청(request)`과 `응답(response)`의 구조로 되어 있다는 것이다. HTTP를
기반으로 통신할 때 클라이언트가 먼저 HTTP 요청을 서버에 보내면 서버는 요청을 처리한 후 결과에 따른 HTTP 응답을 클라이언트에게 보냄으로써 하나의 
HTTP 통신이 된다.

### HTTP 요청 메서드

HTTP 요청 메서드는 HTTP 메서드 처리 유형을 정의하는 식별자다. 표준 메서드에는 GET, POST, PUT, PATCH, DELETE등이 있다.

+ __GET__
    + 특정한 리소스를 가져오도록 요청
    + GET 요청은 데이터를 가져올 때만 사용해야 한다.
+ __HEAD__
    + GET 메서드의 요청과 동일하지만, 응답 본문(body)을 포함하지 않는다. 응답코드와 HEAD만 가져온다.
    + 웹서버 정보 확인, 버전 확인, 최종 수정 일자 확인 등의 용도로 사용
+ __POST__
    + 서버로 데이터 전송
    + 요청된 자원을 생성(CREATE)한다.
+ __PUT__
    + 요청된 자원을 수정(UPDATE)한다.
+ __DELETE__
    + 특정 리소스 삭제 요청
+ __CONNECT__
    + 동적으로 서버 터널 교환
    + 프록시 기능 요청시 사용
+ __OPTIONS__
    + 웹서버에서 지원되는 메소드의 종류를 확인할 경우 사용
+ __PATCH__
    + 리소스의 부분만을 수정
+ __TRACE__
    + 원격지 서버에 루프백 메시지 호출하기 위해 테스트용으로 사용

### HTTP 응답 코드

서버에서의 처리 결과는 응답 메시지의 상태 라인에 있는 상태 코드(status code)를 보고 파악할 수 있다. 상태 코드는 세 자리 숫자로 되어 있는데
첫 번째 숫자는 HTTP 응답의 종류를 구분하는 데 사용하며 나머지 2개의 숫자는 세부적인 응답 내용 구분을 위한 번호이다.

현재 100~500번 대까지 상태 코드가 정의되어 있는데 첫 번째 자리 숫자에 따라 다음과 같이 5가지로 분류해서 사용하고 있다.

+ __1XX__
    + Informational (정보 제공)
    + 임시 응답으로 현재 클라이언트의 요청까지는 처리되었으니 계속 진행하라는 의미이다. HTTP 1.1 버전부터 추가되었다.
+ __2XX__
    + Success (성공)
    + 클라이언트의 요청이 서버에서 성공적으로 처리되었다는 의미이다.
+ __3XX__
    + Redirection (리다이렉션)
    + 완전한 처리를 위해서 추가 동작이 필요한 경우이다. 주로 서버의 주소 또는 요청한 URI의 웹 문서가 이동되었으니 그 주소로 다시 시도하라는
      의미이다.
+ __4XX__
    + Client Error (클라이언트 에러)
    + 없는 페이지를 요청하는 등 클라이언트의 요청 메시지 내용이 잘못된 경우를 의미한다.
+ __5XX__
    + Server Error (서버 에러)
    + 서버 사정으로 메시지 처리에 문제가 발생한 경우이다. 서버의 부하, DB 처리 과정 오류, 서버에서 예외가 발생하는 경우를 의미.

### stateless

HTTP 통신은 `stateless`이다. `stateless`는 말 그대로 `상태(state)`가 없다는 뜻으로, HTTP 통신에서는 `상태(state)`라는 개념이 존재하지 
않는다. 

클라이언트와 서버는 HTTP 통신을 여러 번 주고받는 것이 일반적인데, HTTP 프로토콜에서는 동일한 클라이언트와 서버가 주고받는 HTTP 통신들이라도 
서로 연결되어 있지 않다.   
즉, 각각의 HTTP 통신은 `독집적`이며 그 전에 처리된 HTTP 통신에 대해서 전혀 알지 못한다. __그렇기에 HTTP 프로토콜은 stateless라고 하는 것이다.__

`HTTP 프로토콜`이 `stateless`이기 때문에 __서버 디자인이 훨씬 간단해지고 효과적인 `장점`이 있다.__

HTTP 통신들의 상태를 서버에서 저장할 필요가 없으므로 여러 다른 HTTP 통신 간의 진행이나 연결 상태의 처리나 저장을 구현 및 관리하지 않아도
되기 때문이다. __오직 각각의 HTTP 요청에 대해 독집적으로 응답만 보내 주면 된다.__

다만 `단점`은 `stateless`이기 때문에 HTTP 요청을 보낼 때는 해당 요청을 처리하기 위해 필요한 모든 데이터를 매번 포함시켜서 요청을 보내야 한다.
예를 들어, 어떠한 HTTP 요청을 처리하기 위해서는 해당 사용자가 로그인이 되어야 한다고 가정해 보자.   
해당 사용자는 이미 그전의 HTTP 통신을 통해 로그인을 한 상태라고 하더라도 HTTP는 `stateless`이기 때문에 새로 보내는 HTTP 통신에서는 해당 
사용자가 그전 HTTP 통신에서 로그인했다는 사실을 알지 못한다. 그러므로 새로운 HTTP 요청을 보낼 때, 해당 사용자의 로그인 사실 여부를 포함시켜서 
보내야 한다. 사용자의 로그인 사실 여부를 포함시켜서 HTTP 요청을 보내기 위해서는 클라이언트가 사용자의 로그인 사실 여부를 기억하고 있어야 한다.

이러한 점들을 해결하기 위해서 `쿠기(cookie)`나 `세션(session)` 등을 사용하여 HTTP 요청을 처리할 때 필요한 진행 과정이나 데이터를 저장한다.

+ __쿠키(cookie)__
  + 웹 브라우저가 웹세이트에서 보내온 정보를 저장할 수 있도록 하는 조그마한 파일을 말한다.
  + HTTP는 `stateless`이므로 클라이언트에서 HTTP 요청을 보낼 때 필요한 모든 정보를 포함해서 보내야 한다. 그러므로 클라이언트가 필요한 정보를
  포함해서 보낼 수 있으려면 `클라이언트`가 정보를 `저장`할 수 있는 메커니즘이 필요하다. 
  + 웹 브라우저는 `쿠키`라고 하는 파일을 사용해서 필요한 정보를 저장한다.
+ __세션(session)__
  + 쿠키과 마찬가지로 HTTP 통신상에서 필요한 데이터를 저장할 수 있게 하는 메커니즘이다. 
  + 쿠기와 차이점이라면 웹 브라우저, 즉 클라이언트 측에서 데이터를 저장하는 반면에 세션은 `웹 서버`에서 데이터를 `저장`한다.


To be continue...